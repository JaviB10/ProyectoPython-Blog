{% extends 'blog_app/index.html' %}

{% block content_form %}
<div class="container mt-5 pt-5">
    <div class="row d-flex justify-content-center">
        <div class="text-center fs-1 fw-bold">Messages</div>
        {% if messages %}
            {% regroup messages by receiver as message_groups %}
            {% for group in message_groups %}
                <table class="table table-bordered mt-4">
                    <tbody>
                        {% for message in group.list %}
                            <tr>
                                <th scope="row">De: {{ message.sender }}</th>
                                <td>Para: {{ message.receiver }}</td>
                                <td>{{ message.timestamp }}</td>
                                <td>Mensaje: {{ message.message }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endfor %}
        {% else %}
            <p class="text-center">No tienes mensajes.</p>
        {% endif %}
    </div>
</div>
{% endblock content_form %}

